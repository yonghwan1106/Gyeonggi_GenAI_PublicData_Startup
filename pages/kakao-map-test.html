<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <title>ì¹´ì¹´ì˜¤ë§µ API í…ŒìŠ¤íŠ¸</title>
    <style>
        body { 
            font-family: 'Noto Sans KR', sans-serif; 
            margin: 20px; 
            background: #f5f5f5;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
        }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        .info { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        #map { 
            width: 100%; 
            height: 400px; 
            border: 2px solid #ddd; 
            border-radius: 8px;
            margin: 20px 0;
        }
        .api-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
        .log {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            height: 150px;
            overflow-y: auto;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ—ºï¸ ì¹´ì¹´ì˜¤ë§µ API í…ŒìŠ¤íŠ¸</h1>
        
        <div class="api-info">
            <h3>ğŸ“‹ API ì •ë³´</h3>
            <p><strong>JavaScript í‚¤:</strong> <code>b0f49a85cf2dfefcd8ac377de88d38a3</code></p>
            <p><strong>í˜„ì¬ ë„ë©”ì¸:</strong> <code id="currentDomain"></code></p>
            <p><strong>í”„ë¡œí† ì½œ:</strong> <code id="currentProtocol"></code></p>
        </div>

        <div id="statusContainer">
            <div class="status info">ğŸ” ì¹´ì¹´ì˜¤ë§µ API í…ŒìŠ¤íŠ¸ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤...</div>
        </div>

        <div>
            <button onclick="testKakaoMapLoad()">ğŸ—ºï¸ ì¹´ì¹´ì˜¤ë§µ ë¡œë”© í…ŒìŠ¤íŠ¸</button>
            <button onclick="testDomainSettings()">ğŸ”§ ë„ë©”ì¸ ì„¤ì • í™•ì¸</button>
            <button onclick="showMockMap()">ğŸ­ Mock ì§€ë„ í‘œì‹œ</button>
            <button onclick="clearLog()">ğŸ—‘ï¸ ë¡œê·¸ ì§€ìš°ê¸°</button>
        </div>

        <div id="map"></div>

        <div class="log" id="logContainer">
            <div id="log">ì¹´ì¹´ì˜¤ë§µ API í…ŒìŠ¤íŠ¸ ë¡œê·¸...</div>
        </div>

        <div class="api-info">
            <h3>ğŸ› ï¸ ë¬¸ì œ í•´ê²° ê°€ì´ë“œ</h3>
            <ol>
                <li><strong>ë„ë©”ì¸ ë“±ë¡</strong>: <a href="https://developers.kakao.com" target="_blank">ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†”</a>ì—ì„œ í˜„ì¬ ë„ë©”ì¸ì„ ë“±ë¡í•˜ì„¸ìš”</li>
                <li><strong>ë¡œì»¬ ì„œë²„</strong>: íŒŒì¼ì„ ì§ì ‘ ì—´ì§€ ë§ê³  HTTP ì„œë²„ë¡œ ì‹¤í–‰í•˜ì„¸ìš”</li>
                <li><strong>HTTPS í•„ìš”</strong>: ì¼ë¶€ ê¸°ëŠ¥ì€ HTTPSì—ì„œë§Œ ì‘ë™í•©ë‹ˆë‹¤</li>
                <li><strong>ë¸Œë¼ìš°ì € ì½˜ì†”</strong>: F12ë¥¼ ëˆŒëŸ¬ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”</li>
            </ol>
        </div>
    </div>

    <script>
        // í˜„ì¬ í™˜ê²½ ì •ë³´ í‘œì‹œ
        document.getElementById('currentDomain').textContent = window.location.hostname || 'localhost';
        document.getElementById('currentProtocol').textContent = window.location.protocol;

        // ë¡œê·¸ í•¨ìˆ˜
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('log');
            const colorMap = {
                'info': '#00ff00',
                'error': '#ff4444',
                'warning': '#ffaa00',
                'success': '#44ff44'
            };
            
            logElement.innerHTML += `<div style="color: ${colorMap[type]}">[${timestamp}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }

        function clearLog() {
            document.getElementById('log').innerHTML = 'ë¡œê·¸ ì§€ì›Œì§...';
        }

        function updateStatus(message, type) {
            const statusContainer = document.getElementById('statusContainer');
            statusContainer.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        // ì¹´ì¹´ì˜¤ë§µ ë¡œë”© í…ŒìŠ¤íŠ¸
        function testKakaoMapLoad() {
            log('ì¹´ì¹´ì˜¤ë§µ API ë¡œë”© ì‹œì‘...', 'info');
            updateStatus('ğŸ”„ ì¹´ì¹´ì˜¤ë§µ APIë¥¼ ë¡œë”©í•˜ê³  ìˆìŠµë‹ˆë‹¤...', 'warning');

            // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì œê±°
            const existingScript = document.querySelector('script[src*="dapi.kakao.com"]');
            if (existingScript) {
                existingScript.remove();
                log('ê¸°ì¡´ ì¹´ì¹´ì˜¤ë§µ ìŠ¤í¬ë¦½íŠ¸ ì œê±°ë¨', 'info');
            }

            const script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = '//dapi.kakao.com/v2/maps/sdk.js?appkey=b0f49a85cf2dfefcd8ac377de88d38a3';
            
            script.onload = function() {
                log('âœ… ì¹´ì¹´ì˜¤ë§µ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì„±ê³µ!', 'success');
                
                if (typeof kakao !== 'undefined' && kakao.maps) {
                    log('âœ… kakao.maps ê°ì²´ í™•ì¸ë¨', 'success');
                    
                    try {
                        initializeKakaoMap();
                        updateStatus('âœ… ì¹´ì¹´ì˜¤ë§µì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë”©ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
                    } catch (error) {
                        log(`âŒ ì§€ë„ ì´ˆê¸°í™” ì˜¤ë¥˜: ${error.message}`, 'error');
                        updateStatus('âŒ ì§€ë„ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë„ë©”ì¸ ì„¤ì •ì„ í™•ì¸í•˜ì„¸ìš”.', 'error');
                    }
                } else {
                    log('âŒ kakao.maps ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ', 'error');
                    updateStatus('âŒ ì¹´ì¹´ì˜¤ë§µ ê°ì²´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                }
            };
            
            script.onerror = function() {
                log('âŒ ì¹´ì¹´ì˜¤ë§µ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì‹¤íŒ¨', 'error');
                updateStatus('âŒ ì¹´ì¹´ì˜¤ë§µ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•˜ì„¸ìš”.', 'error');
            };
            
            document.head.appendChild(script);
        }

        // ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™”
        function initializeKakaoMap() {
            const container = document.getElementById('map');
            const options = {
                center: new kakao.maps.LatLng(37.2636, 127.0286), // ìˆ˜ì›ì‹œ ì˜í†µêµ¬
                level: 5
            };
            
            const map = new kakao.maps.Map(container, options);
            
            // ë§ˆì»¤ ì¶”ê°€
            const markerPosition = new kakao.maps.LatLng(37.2636, 127.0286);
            const marker = new kakao.maps.Marker({
                position: markerPosition
            });
            marker.setMap(map);
            
            // ì •ë³´ì°½ ì¶”ê°€
            const infowindow = new kakao.maps.InfoWindow({
                content: '<div style="padding:5px;font-size:12px;">ìˆ˜ì›ì‹œ ì˜í†µêµ¬<br>ìƒê¶Œ ë¶„ì„ ì§€ì </div>'
            });
            infowindow.open(map, marker);
            
            log('âœ… ì¹´ì¹´ì˜¤ë§µ ì´ˆê¸°í™” ì™„ë£Œ - ë§ˆì»¤ ë° ì •ë³´ì°½ í‘œì‹œë¨', 'success');
        }

        // ë„ë©”ì¸ ì„¤ì • í™•ì¸
        function testDomainSettings() {
            log('ë„ë©”ì¸ ì„¤ì • í™•ì¸ ì¤‘...', 'info');
            
            const domain = window.location.hostname;
            const protocol = window.location.protocol;
            const port = window.location.port;
            
            log(`í˜„ì¬ ë„ë©”ì¸: ${domain}`, 'info');
            log(`í˜„ì¬ í”„ë¡œí† ì½œ: ${protocol}`, 'info');
            log(`í˜„ì¬ í¬íŠ¸: ${port || 'ê¸°ë³¸í¬íŠ¸'}`, 'info');
            
            const recommendations = [];
            
            if (protocol === 'file:') {
                recommendations.push('âš ï¸ file:// í”„ë¡œí† ì½œ ì‚¬ìš© ì¤‘. HTTP ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.');
            }
            
            if (domain === '' || domain === 'localhost' || domain === '127.0.0.1') {
                recommendations.push('ğŸ“‹ ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†”ì— ë‹¤ìŒ ë„ë©”ì¸ë“¤ì„ ë“±ë¡í•˜ì„¸ìš”:');
                recommendations.push('  - http://localhost:8080');
                recommendations.push('  - http://127.0.0.1:8080');
                recommendations.push('  - file://');
            }
            
            if (recommendations.length > 0) {
                updateStatus('âš ï¸ ë„ë©”ì¸ ì„¤ì •ì´ í•„ìš”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'warning');
                recommendations.forEach(rec => log(rec, 'warning'));
            } else {
                updateStatus('âœ… ë„ë©”ì¸ ì„¤ì •ì´ ì˜¬ë°”ë¥¸ ê²ƒ ê°™ìŠµë‹ˆë‹¤.', 'success');
            }
        }

        // Mock ì§€ë„ í‘œì‹œ
        function showMockMap() {
            log('Mock ì§€ë„ í‘œì‹œ ì¤‘...', 'info');
            updateStatus('ğŸ­ Mock ì§€ë„ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤. (ì‹¤ì œ ì¹´ì¹´ì˜¤ë§µ ëŒ€ì‹ )', 'info');
            
            const mapContainer = document.getElementById('map');
            mapContainer.innerHTML = `
                <div style="width:100%;height:100%;background:linear-gradient(45deg,#e3f2fd,#bbdefb);position:relative;border-radius:8px;">
                    <div style="position:absolute;top:20px;left:20px;background:white;padding:10px;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,0.2);">
                        ğŸ“ ìˆ˜ì›ì‹œ ì˜í†µêµ¬ ê´‘êµë¡œ (Mock Map)
                    </div>
                    
                    <!-- ìƒê¶Œ ì •ë³´ ì˜¤ë²„ë ˆì´ -->
                    <div style="position:absolute;bottom:20px;right:20px;background:rgba(0,0,0,0.8);color:white;padding:15px;border-radius:8px;max-width:200px;">
                        <h6 style="margin:0 0 10px 0;color:#ffd700;">ğŸ“Š ìƒê¶Œ ë¶„ì„ ê²°ê³¼</h6>
                        <div style="margin:5px 0;">ğŸ‘¥ ìœ ë™ì¸êµ¬: 1,234ëª…/ì¼</div>
                        <div style="margin:5px 0;">ğŸª ê²½ìŸì—…ì²´: 12ê°œ</div>
                        <div style="margin:5px 0;">ğŸ’° ì˜ˆìƒë§¤ì¶œ: â‚©3.2M/ì›”</div>
                        <div style="margin:5px 0;">â­ ìƒê¶Œì ìˆ˜: 85/100</div>
                    </div>
                    
                    <!-- Mock ë§ˆì»¤ë“¤ -->
                    <div style="position:absolute;top:40%;left:45%;transform:translate(-50%,-50%);">
                        <div style="background:#ff4444;color:white;padding:5px 10px;border-radius:15px;font-size:20px;">ğŸ“</div>
                        <div style="background:white;padding:3px 8px;border-radius:3px;font-size:10px;margin-top:2px;box-shadow:0 1px 3px rgba(0,0,0,0.3);">ë¶„ì„ ì§€ì </div>
                    </div>
                    
                    <div style="position:absolute;top:60%;left:30%;">
                        <div style="color:#2196F3;font-size:16px;">ğŸª</div>
                        <div style="font-size:8px;background:white;padding:1px 3px;border-radius:2px;">ê²½ìŸì—…ì²´</div>
                    </div>
                    
                    <div style="position:absolute;top:35%;left:65%;">
                        <div style="color:#FF9800;font-size:16px;">â˜•</div>
                        <div style="font-size:8px;background:white;padding:1px 3px;border-radius:2px;">ì¹´í˜</div>
                    </div>
                    
                    <div style="position:absolute;top:70%;left:55%;">
                        <div style="color:#4CAF50;font-size:16px;">ğŸš‡</div>
                        <div style="font-size:8px;background:white;padding:1px 3px;border-radius:2px;">ì§€í•˜ì² ì—­</div>
                    </div>
                    
                    <!-- ë²”ë¡€ -->
                    <div style="position:absolute;top:20px;right:20px;background:rgba(255,255,255,0.9);padding:10px;border-radius:5px;font-size:11px;">
                        <div style="margin:2px 0;"><span style="color:#4CAF50;">â—</span> ê³ ë°€ë„ ì§€ì—­</div>
                        <div style="margin:2px 0;"><span style="color:#FF9800;">â—</span> ì¤‘ë°€ë„ ì§€ì—­</div>
                        <div style="margin:2px 0;"><span style="color:#2196F3;">â—</span> ì €ë°€ë„ ì§€ì—­</div>
                    </div>
                </div>
            `;
            
            log('âœ… Mock ì§€ë„ í‘œì‹œ ì™„ë£Œ', 'success');
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ ìë™ í…ŒìŠ¤íŠ¸
        window.addEventListener('load', function() {
            log('í˜ì´ì§€ ë¡œë”© ì™„ë£Œ', 'success');
            testDomainSettings();
            
            // 3ì´ˆ í›„ ìë™ìœ¼ë¡œ ì¹´ì¹´ì˜¤ë§µ í…ŒìŠ¤íŠ¸
            setTimeout(() => {
                log('ìë™ ì¹´ì¹´ì˜¤ë§µ í…ŒìŠ¤íŠ¸ ì‹œì‘...', 'info');
                testKakaoMapLoad();
            }, 3000);
        });
    </script>
</body>
</html>